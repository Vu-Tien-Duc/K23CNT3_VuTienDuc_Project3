<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/_LayoutAdmin :: layout(
        title='Dashboard',
        headerTitle='T·ªïng quan h·ªá th·ªëng',
        content=~{::content},
        customStyles=~{::styles},
        customScripts=~{::scripts}
      )}">

<head>
    <th:block th:fragment="styles">
        <style>
            /* Background t·ªïng th·ªÉ */
            body {
                background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            }

            /* Welcome Card - Hi·ªán ƒë·∫°i h∆°n */
            .welcome-card {
                background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
                padding: 2.5rem;
                border-radius: 20px;
                color: white;
                margin-bottom: 2rem;
                box-shadow: 0 10px 40px rgba(255, 107, 53, 0.3);
                position: relative;
                overflow: hidden;
            }

            .welcome-card::before {
                content: "üçî";
                position: absolute;
                font-size: 150px;
                opacity: 0.1;
                right: -20px;
                top: -30px;
                transform: rotate(-15deg);
            }

            .welcome-card h2 {
                font-size: 2.2rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
            }

            .welcome-card p {
                font-size: 1.1rem;
                margin-top: 0.5rem;
                opacity: 0.95;
            }

            /* Container cho stats */
            .stats-container {
                margin-bottom: 2rem;
            }

            /* Card th·ªëng k√™ - N√¢ng c·∫•p */
            .stats-card {
                border-radius: 16px;
                padding: 2rem 1.5rem;
                color: white;
                text-align: center;
                font-weight: 600;
                transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                cursor: pointer;
                position: relative;
                overflow: hidden;
                box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            }

            /* Hi·ªáu ·ª©ng s√°ng ph√≠a sau */
            .stats-card::before {
                content: "";
                position: absolute;
                top: -50%;
                right: -50%;
                width: 200%;
                height: 200%;
                background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
                transition: 0.5s;
                opacity: 0;
            }

            .stats-card:hover::before {
                opacity: 1;
                animation: shine 1.5s ease-in-out infinite;
            }

            @keyframes shine {
                0%, 100% { transform: translate(-50%, -50%) scale(0.8); }
                50% { transform: translate(-30%, -30%) scale(1); }
            }

            .stats-card:hover {
                transform: translateY(-8px) scale(1.02);
                box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            }

            /* Icon container */
            .stats-icon {
                font-size: 3rem;
                margin-bottom: 1rem;
                display: inline-block;
                animation: float 3s ease-in-out infinite;
            }

            @keyframes float {
                0%, 100% { transform: translateY(0px); }
                50% { transform: translateY(-10px); }
            }

            .stats-value {
                font-size: 2.8rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }

            .stats-label {
                font-size: 1.1rem;
                opacity: 0.95;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                font-weight: 500;
            }

            /* Gradient m√†u cho t·ª´ng card - Ph√π h·ª£p fastfood */
            .bg-user {
                background: linear-gradient(135deg, #FF6B35, #FF8E53);
            }
            .bg-order {
                background: linear-gradient(135deg, #F7931E, #FFC107);
            }
            .bg-comment {
                background: linear-gradient(135deg, #10b981, #34D399);
            }
            .bg-food {
                background: linear-gradient(135deg, #EF4444, #F87171);
            }
            .bg-category {
                background: linear-gradient(135deg, #8B5CF6, #A78BFA);
            }
            .bg-discount {
                background: linear-gradient(135deg, #EC4899, #F472B6);
            }

            /* Quick Actions Section */
            .quick-actions {
                background: white;
                border-radius: 16px;
                padding: 1.5rem;
                margin-top: 2rem;
                box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            }

            .quick-actions h4 {
                color: #FF6B35;
                font-weight: 700;
                margin-bottom: 1.5rem;
                font-size: 1.3rem;
            }

            .action-btn {
                display: inline-block;
                padding: 0.8rem 1.5rem;
                background: linear-gradient(135deg, #FF6B35, #F7931E);
                color: white;
                border-radius: 10px;
                text-decoration: none;
                margin: 0.5rem;
                transition: 0.3s;
                font-weight: 600;
                box-shadow: 0 4px 10px rgba(255, 107, 53, 0.2);
            }

            .action-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 20px rgba(255, 107, 53, 0.3);
                color: white;
            }

            /* Recent Activity Section */
            .recent-activity {
                background: white;
                border-radius: 16px;
                padding: 1.5rem;
                margin-top: 2rem;
                box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            }

            .recent-activity h4 {
                color: #F7931E;
                font-weight: 700;
                margin-bottom: 1rem;
                font-size: 1.3rem;
            }

            .activity-item {
                padding: 1rem;
                border-left: 4px solid #FF6B35;
                background: #f8f9fa;
                margin-bottom: 1rem;
                border-radius: 8px;
                transition: 0.3s;
            }

            .activity-item:hover {
                background: #fff5f2;
                transform: translateX(5px);
            }

            .activity-time {
                color: #6c757d;
                font-size: 0.85rem;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .stats-value { font-size: 2rem; }
                .stats-icon { font-size: 2.5rem; }
                .welcome-card h2 { font-size: 1.8rem; }
            }

            /* Link styling */
            a.card-link {
                text-decoration: none;
                display: block;
            }
        </style>
    </th:block>
</head>

<body>

<section th:fragment="content">

    <!-- Welcome Banner -->
    <div class="welcome-card">
        <h2>üçï Ch√†o m·ª´ng tr·ªü l·∫°i, Admin!</h2>
        <p>
            <i class="bi bi-calendar-check"></i>
            H√¥m nay l√† <span th:text="${#temporals.format(#temporals.createNow(), 'dd/MM/yyyy')}"></span>
            | <i class="bi bi-clock"></i>
            <span th:text="${#temporals.format(#temporals.createNow(), 'HH:mm')}"></span>
        </p>
    </div>

    <!-- Th·ªëng k√™ t·ªïng quan -->
    <div class="stats-container">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-6 g-4">

            <div class="col">
                <a href="/admin/nguoi-dung" class="card-link">
                    <div class="stats-card bg-user">
                        <div class="stats-icon">üë•</div>
                        <div class="stats-value" th:text="${tongNguoiDung}">0</div>
                        <div class="stats-label">Ng∆∞·ªùi d√πng</div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a href="/admin/don-hang" class="card-link">
                    <div class="stats-card bg-order">
                        <div class="stats-icon">üì¶</div>
                        <div class="stats-value" th:text="${tongDonHang}">0</div>
                        <div class="stats-label">ƒê∆°n h√†ng</div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a href="/admin/binh-luan" class="card-link">
                    <div class="stats-card bg-comment">
                        <div class="stats-icon">üí¨</div>
                        <div class="stats-value" th:text="${tongBinhLuan}">0</div>
                        <div class="stats-label">B√¨nh lu·∫≠n</div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a href="/admin/mon-an" class="card-link">
                    <div class="stats-card bg-food">
                        <div class="stats-icon">üçî</div>
                        <div class="stats-value" th:text="${tongMonAn}">0</div>
                        <div class="stats-label">M√≥n ƒÉn</div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a href="/admin/the-loai" class="card-link">
                    <div class="stats-card bg-category">
                        <div class="stats-icon">üìë</div>
                        <div class="stats-value" th:text="${tongTheLoai}">0</div>
                        <div class="stats-label">Th·ªÉ lo·∫°i</div>
                    </div>
                </a>
            </div>

            <div class="col">
                <a href="/admin/giam-gia" class="card-link">
                    <div class="stats-card bg-discount">
                        <div class="stats-icon">üéÅ</div>
                        <div class="stats-value" th:text="${tongGiamGia}">0</div>
                        <div class="stats-label">M√£ gi·∫£m gi√°</div>
                    </div>
                </a>
            </div>

        </div>
    </div>

    <!-- Quick Actions & Recent Activity Row -->
    <div class="row g-4">

        <!-- Quick Actions -->
        <div class="col-md-6">
            <div class="quick-actions">
                <h4>
                    <i class="bi bi-lightning-charge-fill"></i> Thao t√°c nhanh
                </h4>
                <a href="/admin/mon-an/create" class="action-btn">
                    <i class="bi bi-plus-circle"></i> Th√™m m√≥n ƒÉn m·ªõi
                </a>
                <a href="/admin/don-hang" class="action-btn">
                    <i class="bi bi-box-seam"></i> Xem ƒë∆°n h√†ng
                </a>
                <a href="/admin/giam-gia/create" class="action-btn">
                    <i class="bi bi-gift"></i> T·∫°o m√£ gi·∫£m gi√°
                </a>
                <a href="/admin/the-loai/create" class="action-btn">
                    <i class="bi bi-tag"></i> Th√™m th·ªÉ lo·∫°i
                </a>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="col-md-6">
            <div class="recent-activity">
                <h4>
                    <i class="bi bi-activity"></i> Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y
                </h4>

                <div class="activity-item">
                    <strong>üÜï ƒê∆°n h√†ng m·ªõi</strong><br>
                    <small>ƒê∆°n h√†ng #12345 v·ª´a ƒë∆∞·ª£c ƒë·∫∑t</small><br>
                    <span class="activity-time">5 ph√∫t tr∆∞·ªõc</span>
                </div>

                <div class="activity-item">
                    <strong>‚≠ê ƒê√°nh gi√° m·ªõi</strong><br>
                    <small>Burger Ph√¥ Mai nh·∫≠n 5 sao t·ª´ kh√°ch h√†ng</small><br>
                    <span class="activity-time">15 ph√∫t tr∆∞·ªõc</span>
                </div>

                <div class="activity-item">
                    <strong>üë§ Ng∆∞·ªùi d√πng m·ªõi</strong><br>
                    <small>Nguy·ªÖn VƒÉn A ƒë√£ ƒëƒÉng k√Ω t√†i kho·∫£n</small><br>
                    <span class="activity-time">1 gi·ªù tr∆∞·ªõc</span>
                </div>
            </div>
        </div>

    </div>

</section>

<th:block th:fragment="scripts">
    <script>
        console.log("üçî Admin dashboard loaded successfully!");

        // Animation cho s·ªë li·ªáu
        document.addEventListener('DOMContentLoaded', function() {
            const statsValues = document.querySelectorAll('.stats-value');

            statsValues.forEach(stat => {
                const finalValue = parseInt(stat.textContent);
                let currentValue = 0;
                const increment = Math.ceil(finalValue / 50);

                const counter = setInterval(() => {
                    currentValue += increment;
                    if (currentValue >= finalValue) {
                        stat.textContent = finalValue;
                        clearInterval(counter);
                    } else {
                        stat.textContent = currentValue;
                    }
                }, 20);
            });
        });
    </script>
</th:block>

</body>
</html>