<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/_LayoutAdmin :: layout(
            title='Danh s√°ch b√¨nh lu·∫≠n',
            headerTitle='Qu·∫£n l√Ω b√¨nh lu·∫≠n',
            content=~{::content},
            customStyles=~{::styles},
            customScripts=~{::scripts}
      )}">

<!-- ================= STYLES ================= -->

<th:block th:fragment="styles">
    <style>
        /* Color Palette */
        :root {
            --primary-orange: #FF6B35;
            --secondary-yellow: #FFA500;
            --light-orange: #FFE5DB;
            --dark-orange: #E85D2C;
            --accent-gold: #FFD700;
        }

        body {
            background: linear-gradient(135deg, #FFF5F0 0%, #FFE8DD 100%);
        }

        /* Card styling */
        .card {
            border: none;
            border-radius: 16px;
            background: white;
            box-shadow: 0 8px 24px rgba(255, 107, 53, 0.15);
            overflow: hidden;
        }

        .card-body {
            padding: 0;
        }

        /* Table styling */
        .table {
            margin-bottom: 0;
        }

        .table thead {
            background: linear-gradient(135deg, var(--primary-orange) 0%, var(--secondary-yellow) 100%);
            color: white;
        }

        .table thead th {
            border: none;
            padding: 18px 12px;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .table tbody tr {
            transition: all 0.3s ease;
            border-bottom: 1px solid #FFE5DB;
        }

        .table tbody tr:hover {
            background: linear-gradient(90deg, var(--light-orange) 0%, #FFF 100%);
            transform: translateX(4px);
            box-shadow: -4px 0 0 var(--primary-orange);
        }

        .table tbody td {
            padding: 16px 12px;
            vertical-align: middle;
            border: none;
        }

        /* Rating stars */
        .rating {
            color: var(--accent-gold);
            font-size: 18px;
            white-space: nowrap;
            text-shadow: 0 2px 4px rgba(255, 215, 0, 0.3);
            letter-spacing: 2px;
        }

        /* Comment box */
        .comment-box {
            background: linear-gradient(135deg, #FFFBF5 0%, #FFF 100%);
            border-left: 4px solid var(--secondary-yellow);
            border-radius: 12px;
            padding: 14px 16px;
            box-shadow: 0 3px 12px rgba(255, 165, 0, 0.1);
            max-width: 420px;
            transition: all 0.3s ease;
        }

        .comment-box:hover {
            box-shadow: 0 6px 20px rgba(255, 165, 0, 0.2);
            transform: translateY(-2px);
        }

        .comment-content {
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            font-style: italic;
        }

        /* User badge */
        .user-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: linear-gradient(135deg, var(--light-orange) 0%, #FFF 100%);
            border-radius: 20px;
            border: 2px solid var(--primary-orange);
            font-weight: 500;
            color: var(--dark-orange);
        }

        .user-icon {
            width: 24px;
            height: 24px;
            background: var(--primary-orange);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        /* Food name tag */
        .food-tag {
            display: inline-block;
            padding: 8px 14px;
            background: linear-gradient(135deg, var(--secondary-yellow) 0%, var(--accent-gold) 100%);
            color: white;
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            box-shadow: 0 2px 8px rgba(255, 165, 0, 0.3);
        }

        /* Date badge */
        .date-badge {
            background: #FFF;
            border: 2px solid var(--light-orange);
            padding: 8px 12px;
            border-radius: 8px;
            color: var(--dark-orange);
            font-weight: 500;
            font-size: 13px;
        }

        /* Action buttons */
        .action-btns {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btns .btn {
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .btn-info {
            background: linear-gradient(135deg, #00B4DB 0%, #0083B0 100%);
            color: white;
        }

        .btn-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 131, 176, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #FF416C 0%, #FF4B2B 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 65, 108, 0.4);
        }

        .btn i {
            margin-right: 4px;
        }

        /* Empty state */
        .empty-state {
            padding: 60px 20px;
            text-align: center;
        }

        .empty-state-icon {
            font-size: 64px;
            color: var(--secondary-yellow);
            margin-bottom: 16px;
            opacity: 0.6;
        }

        .empty-state-text {
            color: #999;
            font-size: 16px;
            font-weight: 500;
        }

        /* Row number badge */
        .row-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary-orange) 0%, var(--secondary-yellow) 100%);
            color: white;
            border-radius: 8px;
            font-weight: 700;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .comment-box {
                max-width: 100%;
            }

            .action-btns {
                flex-direction: column;
            }
        }
    </style>
</th:block>

<!-- ================= CONTENT ================= -->

<th:block th:fragment="content">

    <div class="container-fluid">

        <!-- ===== B·∫¢NG B√åNH LU·∫¨N ===== -->
        <div class="card shadow-sm">
            <div class="card-body">

                <table class="table table-hover align-middle">
                    <thead class="text-center">
                    <tr>
                        <th width="5%">#</th>
                        <th width="15%">Ng∆∞·ªùi d√πng</th>
                        <th width="20%">M√≥n ƒÉn</th>
                        <th width="10%">ƒê√°nh gi√°</th>
                        <th>N·ªôi dung</th>
                        <th width="15%">Ng√†y t·∫°o</th>
                        <th width="15%">Thao t√°c</th>
                    </tr>
                    </thead>

                    <tbody>

                    <!-- ===== C√ì D·ªÆ LI·ªÜU ===== -->
                    <tr th:each="bl, stat : ${binhLuans}">
                        <td class="text-center">
                            <span class="row-number" th:text="${stat.count}"></span>
                        </td>

                        <!-- Ng∆∞·ªùi d√πng -->
                        <td>
                            <div class="user-badge">
                                <div class="user-icon">
                                    <i class="bi bi-person-fill"></i>
                                </div>
                                <span th:text="${bl.nguoiDung != null ? bl.nguoiDung.ten : '·∫®n danh'}"></span>
                            </div>
                        </td>

                        <!-- M√≥n ƒÉn -->
                        <td>
                            <span class="food-tag" th:text="${bl.monAn != null ? bl.monAn.ten : 'M√≥n ƒë√£ x√≥a'}"></span>
                        </td>

                        <!-- Sao ƒë√°nh gi√° -->
                        <td class="text-center">
                            <div class="rating"
                                 th:each="i : ${#numbers.sequence(1,5)}"
                                 th:text="${i <= bl.danhGia ? '‚≠ê' : '‚òÜ'}">
                            </div>
                        </td>

                        <!-- N·ªôi dung -->
                        <td>
                            <div class="comment-box">
                                <div class="comment-content"
                                     th:text="${bl.noiDung}">
                                </div>
                            </div>
                        </td>

                        <!-- Ng√†y t·∫°o -->
                        <td class="text-center">
                            <div class="date-badge"
                                 th:text="${#temporals.format(bl.ngayTao, 'dd/MM/yyyy HH:mm')}">
                            </div>
                        </td>

                        <!-- Thao t√°c -->
                        <td>
                            <div class="action-btns">
                                <!-- XEM CHI TI·∫æT -->
                                <a th:href="@{/admin/binh-luan/detail/{id}(id=${bl.id})}"
                                   class="btn btn-sm btn-info">
                                    <i class="bi bi-eye"></i> Xem
                                </a>

                                <!-- X√ìA -->
                                <a th:href="@{/admin/binh-luan/delete/{id}(id=${bl.id})}"
                                   class="btn btn-sm btn-danger"
                                   onclick="return confirm('X√≥a b√¨nh lu·∫≠n n√†y?')">
                                    <i class="bi bi-trash"></i> X√≥a
                                </a>
                            </div>
                        </td>
                    </tr>

                    <!-- ===== KH√îNG C√ì D·ªÆ LI·ªÜU ===== -->
                    <tr th:if="${#lists.isEmpty(binhLuans)}">
                        <td colspan="7">
                            <div class="empty-state">
                                <div class="empty-state-icon">üí¨</div>
                                <div class="empty-state-text">Kh√¥ng c√≥ b√¨nh lu·∫≠n n√†o</div>
                            </div>
                        </td>
                    </tr>

                    </tbody>
                </table>

            </div>
        </div>

    </div>

</th:block>

<!-- ================= SCRIPT ================= -->

<th:block th:fragment="scripts">
    <!-- Kh√¥ng c·∫ßn JS -->
</th:block>

</html>